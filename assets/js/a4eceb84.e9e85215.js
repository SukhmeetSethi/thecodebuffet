"use strict";(self.webpackChunkthecodebuffet=self.webpackChunkthecodebuffet||[]).push([[835],{3075:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>r,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>a});var n=t(7624),c=t(2172);const i={id:"s3-basics",title:"s3 basics with awscli",sidebar_position:1,sidebar_label:"s3 commands",tags:["s3","aws","awscli","s3api","object storage","object"]},o="s3 commands with awscli",l={id:"cloud/aws/s3-basics",title:"s3 basics with awscli",description:"This is quick tutorial to understand basic s3 operations using awscli. It is meant for beginners who are looking to get started with s3 or it can also be used as refresher to go through basic s3 commands.",source:"@site/docs/cloud/aws/s3.md",sourceDirName:"cloud/aws",slug:"/cloud/aws/s3-basics",permalink:"/docs/cloud/aws/s3-basics",draft:!1,unlisted:!1,editUrl:"https://github.com/SukhmeetSethi/thecodebuffet/docs/cloud/aws/s3.md",tags:[{label:"s3",permalink:"/docs/tags/s-3"},{label:"aws",permalink:"/docs/tags/aws"},{label:"awscli",permalink:"/docs/tags/awscli"},{label:"s3api",permalink:"/docs/tags/s-3-api"},{label:"object storage",permalink:"/docs/tags/object-storage"},{label:"object",permalink:"/docs/tags/object"}],version:"current",sidebarPosition:1,frontMatter:{id:"s3-basics",title:"s3 basics with awscli",sidebar_position:1,sidebar_label:"s3 commands",tags:["s3","aws","awscli","s3api","object storage","object"]}},r={},a=[{value:"Install aws command line",id:"install-aws-command-line",level:2},{value:"Configure awscli",id:"configure-awscli",level:2},{value:"Some settings",id:"some-settings",level:3},{value:"S3 Commands",id:"s3-commands",level:2},{value:"Create s3 bucket",id:"create-s3-bucket",level:3},{value:"Copy file to bucket",id:"copy-file-to-bucket",level:3},{value:"Copy directory contents to bucket",id:"copy-directory-contents-to-bucket",level:3},{value:"Delete files from bucket",id:"delete-files-from-bucket",level:3},{value:"Delete bucket",id:"delete-bucket",level:3}];function d(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.M)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"s3-commands-with-awscli",children:"s3 commands with awscli"}),"\n",(0,n.jsx)(s.p,{children:"This is quick tutorial to understand basic s3 operations using awscli. It is meant for beginners who are looking to get started with s3 or it can also be used as refresher to go through basic s3 commands."}),"\n",(0,n.jsx)(s.h2,{id:"install-aws-command-line",children:"Install aws command line"}),"\n",(0,n.jsxs)(s.p,{children:["On ubunutu : ",(0,n.jsx)(s.code,{children:"sudo apt-get install awscli"})]}),"\n",(0,n.jsx)(s.h2,{id:"configure-awscli",children:"Configure awscli"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.code,{children:"aws configure"})}),"\n",(0,n.jsx)(s.h3,{id:"some-settings",children:"Some settings"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"It will prompt for access_key, secret_key, region and default output."}),"\n",(0,n.jsx)(s.li,{children:"Create access_key/secret_key for user through AWS console IAM services."}),"\n",(0,n.jsx)(s.li,{children:"Default region is us-east-1"}),"\n",(0,n.jsx)(s.li,{children:"For output format, choose json"}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"s3-commands",children:"S3 Commands"}),"\n",(0,n.jsx)(s.h3,{id:"create-s3-bucket",children:"Create s3 bucket"}),"\n",(0,n.jsx)(s.p,{children:"Both s3 and s3api can be used for the same:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["With s3 : ",(0,n.jsx)(s.code,{children:"aws s3 mb s3://<unique_bucket_name>"})]}),"\n",(0,n.jsxs)(s.li,{children:["With s3api : ",(0,n.jsx)(s.code,{children:"aws s3api create-bucket --bucket <unique_bucket_name>"})]}),"\n"]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"The default region is us-east-1, so if the list is to be created in any other region then --region option is to be used with bucket configuration"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3api create-bucket --bucket <unique_bucket_name> --region us-west-1 --create-bucket-configuration LocationConstraint=us-west-1"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"copy-file-to-bucket",children:"Copy file to bucket"}),"\n",(0,n.jsx)(s.p,{children:"Copy test.txt to bucket 'test-bucket' :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3 cp ./test.txt s3://test-bucket/"})}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"copy-directory-contents-to-bucket",children:"Copy directory contents to bucket"}),"\n",(0,n.jsx)(s.p,{children:"Copy all directory test/ content to bucket 'test-bucket' :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"aws s3 sync ./test/ s3://test-bucket/"}),"\r\nAnother way to copy is:"]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3 cp ./test/ s3://test-bucket/ --recursive"})}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Remember this will copy the content in bucket directly. If you wish to move the directory as well, the name of the directory should be appended in the s3 url:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3 cp ./test/ s3://test-bucket/test/ --recursive"})}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"delete-files-from-bucket",children:"Delete files from bucket"}),"\n",(0,n.jsx)(s.p,{children:"Delete a file test.txt from bucket 'test-bucket':"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3 rm s3://test-bucket/test.txt"})}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Delete directory test/ from bucket 'test-bucket':"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"aws s3 rm s3://test-bucket/test/ --recursive"})}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"delete-bucket",children:"Delete bucket"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Using s3 : ",(0,n.jsx)(s.code,{children:"aws s3 rb s3://test-bucket/"})]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"Bucket can only be delete when it is empty. If you try to delete non-empty bucket, following error is received :\r\nAn error occurred (BucketNotEmpty) when calling the DeleteBucket operation: The bucket you tried to delete is not empty\n"})})]})}function u(e={}){const{wrapper:s}={...(0,c.M)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},2172:(e,s,t)=>{t.d(s,{I:()=>l,M:()=>o});var n=t(1504);const c={},i=n.createContext(c);function o(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);